!function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var a=function(){function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.$roots=document.querySelectorAll("[data-autocomplete]"),this.data=autocomplete}var o,r,c;return o=a,c=[{key:"handleHighlight",value:function(e,a,o){var r=function(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e);return o&&(r[a]=r[a].replace(new RegExp("(".concat(o,")"),"gim"),"<strong>$1</strong>")),"".concat(r.last," ").concat(r.first," ").concat(r.middle)}},{key:"handleClear",value:function(t){var e=t.querySelector("[data-autocomplete-list]");e.innerHTML="",e.classList.remove("list_show")}}],(r=[{key:"handleListChange",value:function(t,e){var n=e.querySelector("[data-autocomplete-list]"),o=t.dataset.autocompleteField,r=t.value.toLowerCase(),c=this.data.filter((function(t){return t[o].toLowerCase().includes(r)}));n.innerHTML="\n\t\t\t".concat(c.map((function(t){return'<li class="list__item"><button data-autocomplete-id="'.concat(t.id,'" type="button">').concat(a.handleHighlight(t,o,r),"</button></li>")})).join(""),"\n\t\t"),e.querySelector("[data-autocomplete-list]").classList.toggle("list_show",c.length>0)}},{key:"handleSelect",value:function(){var t=this;document.addEventListener("click",(function(e){var n=e.target;if(n.matches("[data-autocomplete-id]")){var o=t.data.find((function(t){return t.id.toString()===n.dataset.autocompleteId})),r=n.closest("[data-autocomplete]");Object.entries(o).filter((function(t){return"id"!==t[0]})).forEach((function(t){r.querySelector('[data-autocomplete-field="'.concat(t[0],'"]')).value=t[1]})),a.handleClear(r),r.querySelectorAll(".field__input").forEach((function(t){window.validation.validate(t)}))}}))}},{key:"init",value:function(){var t=this;this.$roots.length&&(this.$roots.forEach((function(e){e.querySelectorAll("[data-autocomplete-field]").forEach((function(n){n.addEventListener("focus",(function(){t.handleListChange(n,e),t.$roots.forEach((function(t){e!==t&&a.handleClear(t)}))})),n.addEventListener("input",(function(){t.handleListChange(n,e)}))}))})),document.addEventListener("click",(function(e){var n=e.target;n.matches("[data-autocomplete-list]")||n.closest("[data-autocomplete-list]")||n.matches("[data-autocomplete-field]")||t.$roots.forEach((function(t){a.handleClear(t)}))}))),this.handleSelect()}}])&&e(o.prototype,r),c&&e(o,c),Object.defineProperty(o,"prototype",{writable:!1}),a}();(new a).init()}();